# 浏览器
## 1.说下你对DOM树的理解
答：DOM是表述HTML的内部数据结构，将HTML和javascript连接起来，并且过滤了一些不安全的内容，DOM在浏览器中解析过程是通过HTML解析器的分词器将原始数据转换成Token，然后HTML 解析器将Token从头部开始依次压入栈顶，压入时会创建对应的DOM，解析出文本Token时，会直接在DOM中添加，解析到结束Token会弹出Token栈表示解析完成。

[开始学习](https://blog.poetries.top/browser-working-principle/guide/part5/lesson22.html#javascript-%E6%98%AF%E5%A6%82%E4%BD%95%E5%BD%B1%E5%93%8D-dom-%E7%94%9F%E6%88%90%E7%9A%84)
## 2.浏览器缓存策略是怎样的（重点）
答：
浏览器缓存机制是通过HTTP报文的缓存标识来进行的，进行的过程则需要通过浏览器的缓存策略来推动，分为强缓存和协商缓存，强缓存指的是向浏览器缓存请求的结果，根据其缓存规则决定是否使用该缓存的过程；协商缓存指的是强缓存失效后携带结果缓存标识发送给服务端，由服务端决定是否使用缓存的过程；具体获取缓存过程是：浏览器先通过强缓存向浏览器缓存区请求资源，此时会有3种情况，1是没有找到缓存结果和其标识，会重新发送http请求，服务端会返回缓存结果和标识并存入浏览器缓存。2是找到了缓存结果和其标识，但结果失效，会进入协商缓存，3是找到了缓存结果和其标识并有效，则直接使用缓存；强缓存标识有Cache-Control和Expires，前者优先级高，并能解决Expires因为时区不同导致的缓存无效问题，当出现第二种情况时，进入协商缓存，此时浏览器携带缓存标识发起http请求，服务端根据缓存标识If-Match-None/If-Modified-Since来和文件的Etag/Last-Modified对比，如果改变则返回200和资源还有缓存标识，没有改变则返回304，直接用浏览器缓存。强缓存和协商缓存的区别是：强缓存优先于协商缓存，并且是根据时间来进行判断缓存是否失效；协商缓存是通过文件是否修改来判断是否用缓存；使用场景是：频繁变动的资源用协商缓存，不常变的资源用强缓存；

加分项：缓存机制

[开始学习](https://juejin.cn/post/6844903593275817998)
## 3.渲染合成层是什么
答：

渲染层
- 是什么：DOM树每个节点对应着一个LayoutObject，当他们的LayoutObject处于相同坐标空间时，就会形成RenderLayers渲染层。它负责元素按顺序渲染，保证了透明和重叠元素的正确显示。

合成层
- 是什么：特殊的渲染层（transform3d,translateZ,vedio,canvas,iframe,position:fixed;will-change;），拥有单独的图形层。
- 优点：独立图形层进行GPU加速
- 缺点：某些情况导致层爆炸、无法层压缩

[开始学习](https://segmentfault.com/a/1190000014520786)
## 4.描述下浏览器从输入网址到页面展现的整个过程
答：

- 0.输入URL -> CPU并处理 -> 操作系统内核 -> GUI -> 浏览器 -> 浏览器内核
- 1.请求前
  - URL 解析/DNS 查询

- 2.应用层发送HTTP请求
- 3 传输层TCP传输报文
  - 3.1 浏览器查找oi缓存
- 4. 网络层IP协议查询MAC地址
- 5. 数据到达数据链路层
- 6. 服务端处理请求后返回响应，遇到静态资源立即返回
- 7.HTML解析器解析渲染
  字节流 - 字符串 -Token -  NODE - DOM(CSSOM) -Render tree-渲染引擎计算每个节点精确位置和尺寸，放在对应位置，然后渲染颜色和图片，DOM中遇到js会等js执行完再接着渲染，js执行过程操作css，cssom还没渲染完也会阻塞js进而阻塞DOM。
渲染层合成层

[开始学习](https://www.jianshu.com/p/d616d887953a)
## 5.history和hash两种路由方式的最大区别是什么？
答：hash会在浏览器地址后面增加#号，而history可以自定义地址

[开始学习](https://blog.csdn.net/Charissa2017/article/details/104779412)

# 性能优化
## 1.重排和重绘是什么，有什么区别
答：

- 重排：DOM的改变影响了元素的几何属性（布局+尺寸）改变，浏览器需要重新计算几何属性并安放在对应位置的过程；
- 重绘：元素外观改变，没有改变位置，把元素外观重新绘制出来的过程；重排会导致重绘，重绘不会导致重排；

什么时候触发重排:
- 1.页面初次渲染
- 2.改变元素几何属性，大小、字体大小、位置、内外边距
- 3.增删DOM
- 4.获取某些属性或调用计算方法：offsetHeight，getComputedStyle
- 5.激活伪类
- 6.设置style

如何减少重排:
- 1.样式集中处理：cssText
- 2.属性读写分离：
- 3.离线操作
- 4.脱离文档流
- 5.优化动画

[开始学习](https://juejin.cn/post/6844904083212468238)

## 2.如何减少白屏的时间
答：
- DNS解析：DNS缓存，DNS预加载，DNS可靠服务器，CDN，域名切分，HTTP2
- TCP建立连接传输：预连接，TCP网络链路优化（花钱）
- 服务端处理请求：Redis缓存、数据库存储优化、各种中间件、Gzip压缩

解析下载HTML，JS，CSS等资源：
- HTML：1.精简HTML代码和结构 2.资源顺序css头，js尾 3.js用defer/async，监控/埋点js async 4.压缩  HTML，Gzip
- JS：1.减少请求：code split，按需，合并js 2.减少包体积：Uglify/Gzip 压缩；Tree Shaking;合理  ponyfill；3.优化解析与执行：去掉不必要代码；减少long task；函数中少嵌套函数；减少DOM操作；4.缓存：文件名.hash+协商缓存，库文件单独打包
- CSS：1.减少请求：合并CSS，按需 2.减少包体积：Uglify，Gzip，ponyfill 3.加快解析与渲染CSSOM：扁平  CSS选择器结构，用先进布局flex，慎用@import，复用样式，继承样式，昂贵属性，不用通配符属性匹配，不用计算  属性，合理运用GPU加速动画， 4.缓存
- 图片：1.减少请求：雪碧图，懒加载，base64 2.优化图片大小：选择合适格式图片，适当降低图片质量压缩图  片，不同分辨率加载不同大小图片，删除图片冗余信息，SVG压缩
- 字体：内嵌字体，FOUT，FOFT
- 视频：vedio代替gif，合适格式，压缩

[开始学习](https://cloud.tencent.com/developer/article/1508941)

#### 3.你知道的前端性能优化手段有哪些（重点）
答：

缓存
- 1.本地存储缓存
- 2.memery 缓存
- 3.http缓存：强缓存，协商缓存
- 4.cache API缓存
- 5.push cache缓存

http请求
- 1.DNS预解析
- 2.预先建立连接
- 3.CDN
- 4.HTTP2，域名切分

下载与解析页面
- 1.文档资源顺序：css放head，js放body尾
- 2.js defer/async
- 3.压缩HTML：gzip

页面静态资源
- 1.JS
  - 2.减少不必要请求：code split,按需加载，合并js
  - 3.减少包体积：Uglify,Gzip,Three Shaking,合理Ponyfill
  - 4.加快Js解析执行：删除不必要代码，避免longTask，摇树优化减少函数嵌套减少Class，
  - 5.缓存：文件名加上文件内容hash，并设置协商缓存；单独打包基础库
- 2.CSS
  - 1.优化资源请求：按需加载；合并文件；慎用@import;
  - 2.减少包体积大小:uglify,gzip;ponyfill
  - 3.加快解析与渲染树构建:简化选择器;避免高昂属性；先进布局，复用样式，继承样式，不用通配符属性选择器，不用计算属性，动画开启GPU硬件加速
  - 4.缓存：WebpackMiniCssExtractPlugin
- 3.图片
  - 1.优化请求：雪碧图；懒加载；base64
  - 2.减小图片大小：使用合适的图片格式；适当降低图片质量；选择合适的大小/分辨率；删除图片冗余信息；SVG压缩
  - 3.缓存

运行时
- 长列表优化：Virtual Scroll

[开始学习](https://alienzhou.com/projects/fe-performance-journey/#%E6%97%85%E9%80%94%E7%9A%84%E8%A1%8C%E7%A8%8B%E8%B7%AF%E7%BA%BF)

## 4.有听过前端性能优化指标RAIL吗
答：

RAIL是一个以用户为中心的性能模型，它把用户的体验拆分成几个关键点（例如，tap，scroll，load），并且帮你定义好了每一个的性能指标
- Response: 用户的输入到响应的时间不超过100ms，给用户的感受是瞬间就完成了
- Animation: 产生每一帧的时间不要超过10ms
- Idel: 最大化空闲时间，以增大50ms内响应用户输入的几率
- Load: 优化首次和二次加载速度

[开始学习](https://juejin.cn/post/6850037273312886797)

## 5.网站首页有大量的图片，加载很慢，如何去优化呢？
答：

减少请求数
- 1.雪碧图
- 2.懒加载：优先加载视口内图片，然后按需加载其余图片
- 3.base64
- 4.域名切分
- 5.HTTP 2.0

大小优化
- 1.压缩质量：有损压缩，减少图片像素色道值；无损压缩，算法计算相邻像素差异，不损失像素色道值；
- 2.不同分辨率用不用的图片：根据视口分辨率不同来加载不同分辨率图片
- 3.选择合适的图片格式：不同的图片格式压缩比率不同，选择需要的图片格式，比如jpeg和png不支持动画，jpeg  不透明体积小，webp体积小，透明，可动画，浏览器可用；
- 4.删除图片冗余信息；
- 5.SVG压缩；

缓存

[开始学习](https://zhuanlan.zhihu.com/p/33370207)
